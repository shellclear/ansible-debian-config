---
- name: Creating apt keys
  apt_key:
    id: "{{ item.id }}"
    state: "{{ item.state }}"
    url: "{{ item.url }}"
  when: 
    - item.name != 'puppet'
    - item.name != 'mysql'
    - item.name != 'polychromatic'
  loop: "{{ keys }}"
  loop_control:
    label: "{{ item.name }}"  
#  register: result

- name: Creating apt keys only available from keyservers
  apt_key:
    id: "{{ item.id }}"
    state: "{{ item.state }}"
    keyserver: "{{ item.keyserver }}"
  when: 
    - item.name == 'puppet' or 
      item.name == 'mysql' or
      item.name == 'polychromatic'
  loop: "{{ keys }}"
  loop_control:
    label: "{{ item.name }}"    
#  register: result

# - name: DEBUG - Creating additional repository files on /etc/apt/sources.list.d/
#   debug:
#     msg:"
#       - "{{ result }}
